{"version":3,"sources":["../../../src/lib/fx.ts"],"sourcesContent":["/**\n * ease function\n * @param x absolute progress of the animation in bounds 0 (beginning) and 1 (end)\n */\nexport function easeInOutSine(x: number): number {\n  return 0.5 * (1 - Math.cos(Math.PI * x));\n}\n\n/**\n * JS-реализация cubic bezier\n *\n * Алгебраический метод решения взят из PRа {@link https://github.com/gre/bezier-easing/pull/57}\n */\nexport function cubicBezier(mX1: number, mY1: number, mX2: number, mY2: number) {\n  if (!(0 <= mX1 && mX1 <= 1 && 0 <= mX2 && mX2 <= 1)) {\n    throw new Error('Bezier x values must be in [0, 1] range');\n  }\n\n  if (mX1 === mY1 && mX2 === mY2) {\n    return LinearEasing;\n  }\n\n  const a = 6 * (3 * mX1 - 3 * mX2 + 1);\n  const b = 6 * (mX2 - 2 * mX1);\n  const c = 3 * mX1;\n  const a2 = a * a;\n  const b2 = b * b;\n  const d = b / a;\n  const e = (3 * b * c) / a2 - (b2 * b) / (a2 * a);\n  const w1 = (2 * c) / a - b2 / a2;\n  const w = w1 * w1 * w1;\n  const o = 3 / a;\n  const ay = 3 * mY1 - 3 * mY2 + 1;\n  const by = mY2 - 2 * mY1;\n  const cy = 3 * mY1;\n\n  const funcX2T = a ? x2t : LinearEasing;\n\n  return (x: number) => {\n    if (x === 0 || x === 1) {\n      return x;\n    }\n    return funcY(funcX2T(x, e, o, w, d), ay, by, cy);\n  };\n}\n\nfunction LinearEasing(x: number) {\n  return x;\n}\n\nfunction x2t(x: number, a: number, b: number, c: number, d: number) {\n  const q = a + b * x;\n  const s = q ** 2 + c;\n  if (s > 0) {\n    const root = Math.sqrt(s);\n    return Math.cbrt(q + root) + Math.cbrt(q - root) - d;\n  }\n  const l = Math.cbrt(Math.sqrt(q * q - s));\n  const angle = q ? Math.atan(Math.sqrt(-s) / q) : -Math.PI / 2;\n  let φ;\n  if (b < 0) {\n    φ = (q > 0 ? 2 * Math.PI : Math.PI) - angle;\n  } else if (d < 0) {\n    φ = (q > 0 ? 2 * Math.PI : -3 * Math.PI) + angle;\n  } else {\n    φ = (q > 0 ? 0 : Math.PI) + angle;\n  }\n  return 2 * l * Math.cos(φ / 3) - d;\n}\n\nfunction funcY(t: number, ay: number, by: number, cy: number) {\n  return ((ay * t + 3 * by) * t + cy) * t;\n}\n"],"names":["easeInOutSine","x","Math","cos","PI","cubicBezier","mX1","mY1","mX2","mY2","Error","LinearEasing","a","b","c","a2","b2","d","e","w1","w","o","ay","by","cy","funcX2T","x2t","funcY","q","s","root","sqrt","cbrt","l","angle","atan","φ","t"],"mappings":"AAAA;;;CAGC,GACD,OAAO,SAASA,cAAcC,CAAS;IACrC,OAAO,MAAO,CAAA,IAAIC,KAAKC,GAAG,CAACD,KAAKE,EAAE,GAAGH,EAAC;AACxC;AAEA;;;;CAIC,GACD,OAAO,SAASI,YAAYC,GAAW,EAAEC,GAAW,EAAEC,GAAW,EAAEC,GAAW;IAC5E,IAAI,CAAE,CAAA,KAAKH,OAAOA,OAAO,KAAK,KAAKE,OAAOA,OAAO,CAAA,GAAI;QACnD,MAAM,IAAIE,MAAM;IAClB;IAEA,IAAIJ,QAAQC,OAAOC,QAAQC,KAAK;QAC9B,OAAOE;IACT;IAEA,MAAMC,IAAI,IAAK,CAAA,IAAIN,MAAM,IAAIE,MAAM,CAAA;IACnC,MAAMK,IAAI,IAAKL,CAAAA,MAAM,IAAIF,GAAE;IAC3B,MAAMQ,IAAI,IAAIR;IACd,MAAMS,KAAKH,IAAIA;IACf,MAAMI,KAAKH,IAAIA;IACf,MAAMI,IAAIJ,IAAID;IACd,MAAMM,IAAI,AAAC,IAAIL,IAAIC,IAAKC,KAAK,AAACC,KAAKH,IAAME,CAAAA,KAAKH,CAAAA;IAC9C,MAAMO,KAAK,AAAC,IAAIL,IAAKF,IAAII,KAAKD;IAC9B,MAAMK,IAAID,KAAKA,KAAKA;IACpB,MAAME,IAAI,IAAIT;IACd,MAAMU,KAAK,IAAIf,MAAM,IAAIE,MAAM;IAC/B,MAAMc,KAAKd,MAAM,IAAIF;IACrB,MAAMiB,KAAK,IAAIjB;IAEf,MAAMkB,UAAUb,IAAIc,MAAMf;IAE1B,OAAO,CAACV;QACN,IAAIA,MAAM,KAAKA,MAAM,GAAG;YACtB,OAAOA;QACT;QACA,OAAO0B,MAAMF,QAAQxB,GAAGiB,GAAGG,GAAGD,GAAGH,IAAIK,IAAIC,IAAIC;IAC/C;AACF;AAEA,SAASb,aAAaV,CAAS;IAC7B,OAAOA;AACT;AAEA,SAASyB,IAAIzB,CAAS,EAAEW,CAAS,EAAEC,CAAS,EAAEC,CAAS,EAAEG,CAAS;IAChE,MAAMW,IAAIhB,IAAIC,IAAIZ;IAClB,MAAM4B,IAAID,KAAK,IAAId;IACnB,IAAIe,IAAI,GAAG;QACT,MAAMC,OAAO5B,KAAK6B,IAAI,CAACF;QACvB,OAAO3B,KAAK8B,IAAI,CAACJ,IAAIE,QAAQ5B,KAAK8B,IAAI,CAACJ,IAAIE,QAAQb;IACrD;IACA,MAAMgB,IAAI/B,KAAK8B,IAAI,CAAC9B,KAAK6B,IAAI,CAACH,IAAIA,IAAIC;IACtC,MAAMK,QAAQN,IAAI1B,KAAKiC,IAAI,CAACjC,KAAK6B,IAAI,CAAC,CAACF,KAAKD,KAAK,CAAC1B,KAAKE,EAAE,GAAG;IAC5D,IAAIgC;IACJ,IAAIvB,IAAI,GAAG;QACTuB,IAAI,AAACR,CAAAA,IAAI,IAAI,IAAI1B,KAAKE,EAAE,GAAGF,KAAKE,EAAE,AAAD,IAAK8B;IACxC,OAAO,IAAIjB,IAAI,GAAG;QAChBmB,IAAI,AAACR,CAAAA,IAAI,IAAI,IAAI1B,KAAKE,EAAE,GAAG,CAAC,IAAIF,KAAKE,EAAE,AAAD,IAAK8B;IAC7C,OAAO;QACLE,IAAI,AAACR,CAAAA,IAAI,IAAI,IAAI1B,KAAKE,EAAE,AAAD,IAAK8B;IAC9B;IACA,OAAO,IAAID,IAAI/B,KAAKC,GAAG,CAACiC,IAAI,KAAKnB;AACnC;AAEA,SAASU,MAAMU,CAAS,EAAEf,EAAU,EAAEC,EAAU,EAAEC,EAAU;IAC1D,OAAO,AAAC,CAAA,AAACF,CAAAA,KAAKe,IAAI,IAAId,EAAC,IAAKc,IAAIb,EAAC,IAAKa;AACxC"}