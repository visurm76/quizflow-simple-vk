{"version":3,"sources":["../../../../src/components/TooltipBase/TooltipBase.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { Icon16Cancel } from '@vkontakte/icons';\nimport { classNames, hasReactNode } from '@vkontakte/vkjs';\nimport type { HTMLAttributesWithRootRef } from '../../types';\nimport { DefaultIcon } from '../FloatingArrow/DefaultIcon';\nimport { FloatingArrow, type FloatingArrowProps } from '../FloatingArrow/FloatingArrow';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport { Tappable } from '../Tappable/Tappable';\nimport { Subhead } from '../Typography/Subhead/Subhead';\nimport { VisuallyHidden } from '../VisuallyHidden/VisuallyHidden';\nimport styles from './TooltipBase.module.css';\n\nexport const TOOLTIP_MAX_WIDTH = 220;\n\nconst stylesAppearance = {\n  accent: styles.appearanceAccent,\n  white: styles.appearanceWhite,\n  black: styles.appearanceBlack,\n  inversion: styles.appearanceInversion,\n};\n\nexport interface TooltipBaseProps\n  extends Omit<HTMLAttributesWithRootRef<HTMLDivElement>, 'children' | 'title'> {\n  /**\n   * Стиль отображения подсказки.\n   */\n  appearance?: 'accent' | 'neutral' | 'white' | 'black' | 'inversion';\n  /**\n   * Текст тултипа.\n   */\n  description?: React.ReactNode;\n  /**\n   * Заголовок тултипа.\n   */\n  title?: React.ReactNode;\n  /**\n   * [a11y] Id для заголовка тултипа.\n   * Можно использовать для связи элемента с `role=\"dialog\"` и заголовка через `aria-labelledby`.\n   */\n  titleId?: string;\n  /**\n   * Для показа указателя, требуется передать хотя бы `coords` и `placement`.\n   */\n  arrowProps?: Omit<FloatingArrowProps, 'Icon'>;\n  /**\n   * Пользовательская SVG иконка.\n   *\n   * Требования:\n   *\n   * 1. Иконка по умолчанию должна быть направлена вверх (a.k.a `IconUp`).\n   * 2. Чтобы избежать проблемы с пространством между стрелкой и контентом на некоторых экранах,\n   *    растяните кривую по высоте на `1px` и увеличьте на этот размер `height` и `viewBox` SVG.\n   *    (смотри https://github.com/VKCOM/VKUI/pull/4496).\n   * 3. Убедитесь, что компонент принимает все валидные для SVG параметры.\n   * 4. Убедитесь, что SVG и её элементы наследует цвет через `fill=\"currentColor\"`.\n   * 5. Если стрелка наезжает на якорный элемент, то увеличьте смещение между целевым и всплывающим элементами.\n   */\n  ArrowIcon?: FloatingArrowProps['Icon'];\n  /**\n   * Пользовательские css-классы, будут добавлены на root-элемент.\n   */\n  className?: string;\n  /**\n   * Перебивает максимальную ширину заданную по умолчанию.\n   *\n   * Передача `null` полностью сбрасывает установку `max-width` на элемент.\n   */\n  maxWidth?: number | string | null;\n  /**\n   * Скрытый текст для кнопки закрытия.\n   */\n  closeIconLabel?: string;\n  /**\n   * Обработчик нажатия на кнопку закрытия. При передаче, показывается иконка.\n   */\n  onCloseIconClick?: (event: React.MouseEvent<HTMLButtonElement>) => void;\n}\n\n/**\n * Низкоуровневый компонент для отрисовки тултипа.\n * @private\n */\nexport const TooltipBase = ({\n  appearance = 'accent',\n  arrowProps,\n  ArrowIcon = DefaultIcon,\n  description,\n  title,\n  titleId,\n  maxWidth = TOOLTIP_MAX_WIDTH,\n  closeIconLabel = 'Закрыть',\n  onCloseIconClick,\n  className,\n  ...restProps\n}: TooltipBaseProps): React.ReactNode => {\n  return (\n    <RootComponent\n      {...restProps}\n      baseClassName={classNames(\n        styles.host,\n        appearance !== 'neutral' && stylesAppearance[appearance],\n        className,\n      )}\n      role=\"tooltip\"\n    >\n      {arrowProps && (\n        <FloatingArrow\n          {...arrowProps}\n          iconClassName={classNames(styles.arrow, arrowProps.iconClassName)}\n          Icon={ArrowIcon}\n        />\n      )}\n      <div className={styles.content} style={maxWidth !== null ? { maxWidth } : undefined}>\n        <div>\n          {hasReactNode(title) && (\n            <Subhead id={titleId} className={styles.title} weight=\"2\">\n              {title}\n            </Subhead>\n          )}\n          {hasReactNode(description) && (\n            <Subhead className={styles.description}>{description}</Subhead>\n          )}\n        </div>\n        {typeof onCloseIconClick === 'function' && (\n          <Tappable\n            Component=\"button\"\n            className={styles.closeButton}\n            hoverMode=\"opacity\"\n            activeMode=\"opacity\"\n            onClick={onCloseIconClick}\n          >\n            <VisuallyHidden>{closeIconLabel}</VisuallyHidden>\n            <Icon16Cancel display=\"block\" />\n          </Tappable>\n        )}\n      </div>\n    </RootComponent>\n  );\n};\n"],"names":["React","Icon16Cancel","classNames","hasReactNode","DefaultIcon","FloatingArrow","RootComponent","Tappable","Subhead","VisuallyHidden","styles","TOOLTIP_MAX_WIDTH","stylesAppearance","accent","appearanceAccent","white","appearanceWhite","black","appearanceBlack","inversion","appearanceInversion","TooltipBase","appearance","arrowProps","ArrowIcon","description","title","titleId","maxWidth","closeIconLabel","onCloseIconClick","className","restProps","baseClassName","host","role","iconClassName","arrow","Icon","div","content","style","undefined","id","weight","Component","closeButton","hoverMode","activeMode","onClick","display"],"mappings":"AAAA;;AAEA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,YAAY,QAAQ,mBAAmB;AAChD,SAASC,UAAU,EAAEC,YAAY,QAAQ,kBAAkB;AAE3D,SAASC,WAAW,QAAQ,kCAA+B;AAC3D,SAASC,aAAa,QAAiC,oCAAiC;AACxF,SAASC,aAAa,QAAQ,oCAAiC;AAC/D,SAASC,QAAQ,QAAQ,0BAAuB;AAChD,SAASC,OAAO,QAAQ,mCAAgC;AACxD,SAASC,cAAc,QAAQ,sCAAmC;AAClE,OAAOC,YAAY,2BAA2B;AAE9C,OAAO,MAAMC,oBAAoB,IAAI;AAErC,MAAMC,mBAAmB;IACvBC,QAAQH,OAAOI,gBAAgB;IAC/BC,OAAOL,OAAOM,eAAe;IAC7BC,OAAOP,OAAOQ,eAAe;IAC7BC,WAAWT,OAAOU,mBAAmB;AACvC;AA2DA;;;CAGC,GACD,OAAO,MAAMC,cAAc,CAAC,EAC1BC,aAAa,QAAQ,EACrBC,UAAU,EACVC,YAAYpB,WAAW,EACvBqB,WAAW,EACXC,KAAK,EACLC,OAAO,EACPC,WAAWjB,iBAAiB,EAC5BkB,iBAAiB,SAAS,EAC1BC,gBAAgB,EAChBC,SAAS,EACT,GAAGC,WACc;IACjB,qBACE,MAAC1B;QACE,GAAG0B,SAAS;QACbC,eAAe/B,WACbQ,OAAOwB,IAAI,EACXZ,eAAe,aAAaV,gBAAgB,CAACU,WAAW,EACxDS;QAEFI,MAAK;;YAEJZ,4BACC,KAAClB;gBACE,GAAGkB,UAAU;gBACda,eAAelC,WAAWQ,OAAO2B,KAAK,EAAEd,WAAWa,aAAa;gBAChEE,MAAMd;;0BAGV,MAACe;gBAAIR,WAAWrB,OAAO8B,OAAO;gBAAEC,OAAOb,aAAa,OAAO;oBAAEA;gBAAS,IAAIc;;kCACxE,MAACH;;4BACEpC,aAAauB,wBACZ,KAAClB;gCAAQmC,IAAIhB;gCAASI,WAAWrB,OAAOgB,KAAK;gCAAEkB,QAAO;0CACnDlB;;4BAGJvB,aAAasB,8BACZ,KAACjB;gCAAQuB,WAAWrB,OAAOe,WAAW;0CAAGA;;;;oBAG5C,OAAOK,qBAAqB,4BAC3B,MAACvB;wBACCsC,WAAU;wBACVd,WAAWrB,OAAOoC,WAAW;wBAC7BC,WAAU;wBACVC,YAAW;wBACXC,SAASnB;;0CAET,KAACrB;0CAAgBoB;;0CACjB,KAAC5B;gCAAaiD,SAAQ;;;;;;;;AAMlC,EAAE"}