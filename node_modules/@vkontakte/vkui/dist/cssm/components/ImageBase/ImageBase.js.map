{"version":3,"sources":["../../../../src/components/ImageBase/ImageBase.tsx"],"sourcesContent":["'use client';\n\nimport { useRef } from 'react';\nimport * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { mergeStyle } from '../../helpers/mergeStyle';\nimport { useExternRef } from '../../hooks/useExternRef';\nimport { useMergeProps } from '../../hooks/useMergeProps';\nimport { minOr } from '../../lib/comparing';\nimport { defineComponentDisplayNames } from '../../lib/react/defineComponentDisplayNames';\nimport { getFetchPriorityProp } from '../../lib/utils';\nimport { warnOnce } from '../../lib/warnOnce';\nimport type {\n  AnchorHTMLAttributesOnly,\n  HasDataAttribute,\n  HasRootRef,\n  LiteralUnion,\n} from '../../types';\nimport { Clickable } from '../Clickable/Clickable';\nimport { ImageBaseBadge, type ImageBaseBadgeProps } from './ImageBaseBadge/ImageBaseBadge';\nimport {\n  type FloatElementIndentation,\n  type FloatElementPlacement,\n  ImageBaseFloatElement,\n  type ImageBaseFloatElementProps,\n} from './ImageBaseFloatElement/ImageBaseFloatElement';\nimport { ImageBaseOverlay, type ImageBaseOverlayProps } from './ImageBaseOverlay/ImageBaseOverlay';\nimport { ImageBaseContext } from './context';\nimport type { ImageBaseContextProps, ImageBaseExpectedIconProps, ImageBaseSize } from './types';\nimport { validateFallbackIcon, validateSize } from './validators';\nimport styles from './ImageBase.module.css';\n\nexport type {\n  ImageBaseSize,\n  ImageBaseExpectedIconProps,\n  ImageBaseBadgeProps,\n  ImageBaseOverlayProps,\n  ImageBaseContextProps,\n  ImageBaseFloatElementProps,\n  FloatElementPlacement,\n  FloatElementIndentation,\n};\n\nexport {\n  getBadgeIconSizeByImageBaseSize,\n  getFallbackIconSizeByImageBaseSize,\n  getOverlayIconSizeByImageBaseSize,\n} from './helpers';\n\nexport { ImageBaseContext };\n\nconst warn = warnOnce('ImageBase');\n\n/**\n * –†–∞–∑–º–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.\n */\nconst defaultSize = 24;\n\nexport interface ImageBaseProps\n  extends React.ImgHTMLAttributes<HTMLElement>,\n    AnchorHTMLAttributesOnly,\n    HasRootRef<HTMLDivElement> {\n  /**\n   * –ó–∞–¥–∞—ë—Ç —Ä–∞–∑–º–µ—Ä –∫–∞—Ä—Ç–∏–Ω–∫–∏.\n   *\n   * –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∞–∑–º–µ—Ä—ã –∑–∞–¥–∞–Ω–Ω—ã–µ –¥–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–æ–π `16 | 20 | 24 | 28 | 32 | 36 | 40 | 44 | 48 | 56 | 64 | 72 | 80 | 88 | 96`.\n   *\n   * > ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ ‚Äì —ç—Ç–æ –ø–æ–≥—Ä–∞–Ω–∏—á–Ω—ã–π –∫–µ–π—Å.\n   */\n  size?: LiteralUnion<ImageBaseSize, number>;\n  /**\n   * –®–∏—Ä–∏–Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.\n   */\n  widthSize?: number | string;\n  /**\n   * –í—ã—Å–æ—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.\n   */\n  heightSize?: number | string;\n  /**\n   * –û—Ç–∫–ª—é—á–∞–µ—Ç –æ–±–≤–æ–¥–∫—É.\n   */\n  noBorder?: boolean;\n  /**\n   * –§–æ–ª–±–µ–∫ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –Ω–µ –ø—Ä–æ–≥—Ä—É–∑–∏–ª–∞—Å—å.\n   *\n   * > üìù –ù—É–∂–Ω—ã–π –¥–ª—è `<ImageBase size={...} />` —Ä–∞–∑–º–µ—Ä –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –∏–∑ —Ñ—É–Ω–∫—Ü–∏–∏ `getFallbackIconSizeByImageBaseSize()`.\n   *\n   * > –ü—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–∫–æ–Ω–∫–∏ –∏–∑ `@vkontakte/icons`.\n   *\n   * > üìäÔ∏è –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–¥–∞—Ç—å –∫–∞—Å—Ç–æ–º–Ω—É—é –∏–∫–æ–Ω–∫—É, —Ç–æ —Å–ª–µ–¥—É–µ—Ç –∏–º–µ–Ω–æ–≤–∞—Ç—å –µ—ë –ø–æ —à–∞–±–ª–æ–Ω—É `Icon<size><name>`. –ò–ª–∏ –∂–µ\n   * > —á—Ç–æ–±—ã –≤ –Ω–µ—ë –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `width`. –¢–æ–≥–¥–∞ –º—ã —Å–º–æ–∂–µ–º –≤—ã–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å –ø–æ–¥—Å–∫–∞–∑–∫—É –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ª–∏ —Ä–∞–∑–º–µ—Ä–∞ –≤—ã\n   * > –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –∏–∫–æ–Ω–∫—É.\n   *\n   * > ‚ö†Ô∏è –ú–æ–∂–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å `children`.\n   */\n  fallbackIcon?: React.ReactElement<ImageBaseExpectedIconProps>;\n  /**\n   * –û—Ç–∫–ª—é—á–∞–µ—Ç —Ñ–æ–Ω, –∑–∞–¥–∞–Ω–Ω—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –ü–æ–ª–µ–∑–µ–Ω –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ —Å –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é.\n   * @since 5.10.0\n   */\n  withTransparentBackground?: boolean;\n  /**\n   * –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∏–ª—è object-fit\n   * –ü–æ–¥—Ä–æ–±–Ω–µ–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://developer.mozilla.org/ru/docs/Web/CSS/object-fit).\n   */\n  objectFit?: React.CSSProperties['objectFit'];\n  /**\n   * –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∏–ª—è object-position\n   * –ü–æ–¥—Ä–æ–±–Ω–µ–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://developer.mozilla.org/ru/docs/Web/CSS/object-position).\n   */\n  objectPosition?: React.CSSProperties['objectPosition'];\n  /**\n   * –§–ª–∞–≥ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–π –∫–∞—Ä—Ç–∏–Ω–∫–∏.\n   * –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã —Ö–æ—Ç—è –±—ã –æ–¥–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –∫–∞—Ä—Ç–∏–Ω–∫–∏.\n   */\n  keepAspectRatio?: boolean;\n  /**\n   * –°–º–æ—Ç—Ä–∏ https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/elementtiming.\n   */\n  elementTiming?: string;\n  /**\n   * –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏—è —Å—Ç–∏–ª—è filter\n   * –ü–æ–¥—Ä–æ–±–Ω–µ–µ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å –≤ [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://developer.mozilla.org/ru/docs/Web/CSS/filter).\n   */\n  filter?: React.CSSProperties['filter'];\n  /**\n   * –°–≤–æ–π—Å—Ç–≤–∞, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–æ–∫–∏–Ω—É—Ç—å –≤–Ω—É—Ç—Ä—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:\n   * - `img`: —Å–≤–æ–π—Å—Ç–≤–∞ –¥–ª—è –ø—Ä–æ–∫–∏–¥—ã–≤–∞–Ω–∏—è –≤ —Ç–µ–≥ `<img>`;.\n   */\n  slotProps?: {\n    img?: React.ComponentProps<'img'> & HasRootRef<HTMLImageElement> & HasDataAttribute;\n  };\n  /**\n   * @deprecated Since 7.9.0. –ë—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –≤ v9. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `slotProps={ img: { getRootRef: ... } }`.\n   */\n  getRef?: React.Ref<HTMLImageElement>; // TODO [>=9] –£–¥–∞–ª–∏—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ\n}\n\nconst getObjectFitClassName = (objectFit: React.CSSProperties['objectFit']) => {\n  switch (objectFit) {\n    case 'contain':\n      return styles.imgObjectFitContain;\n    case 'cover':\n      return styles.imgObjectFitCover;\n    case 'none':\n      return styles.imgObjectFitNone;\n    case 'scale-down':\n      return styles.imgObjectFitScaleDown;\n  }\n  return undefined;\n};\n\nconst parsePx = (value: string): number | undefined => {\n  if (value.endsWith('px')) {\n    return parseInt(value);\n  }\n  return undefined;\n};\n\nconst sizeToNumber = (size: number | string | undefined): number | undefined => {\n  if (typeof size === 'string') {\n    return parsePx(size);\n  }\n  return size;\n};\n\n/**\n * @see https://vkui.io/components/image-base\n */\nexport const ImageBase: React.FC<ImageBaseProps> & {\n  Badge: typeof ImageBaseBadge;\n  Overlay: typeof ImageBaseOverlay;\n  FloatElement: typeof ImageBaseFloatElement;\n} = ({\n  alt,\n  crossOrigin,\n  decoding,\n  loading,\n  referrerPolicy,\n  sizes,\n  src,\n  srcSet,\n  useMap,\n  fetchPriority: fetchPriorityProp,\n  getRef,\n  size: sizeProp,\n  width: widthImg,\n  height: heightImg,\n  widthSize,\n  heightSize,\n  noBorder = false,\n  fallbackIcon: fallbackIconProp,\n  children,\n  onLoad,\n  onError,\n  withTransparentBackground,\n  objectFit = 'cover',\n  objectPosition,\n  filter,\n  keepAspectRatio = false,\n  getRootRef,\n  elementTiming,\n  slotProps,\n  ...restProps\n}: ImageBaseProps) => {\n  if (process.env.NODE_ENV === 'development') {\n    /* istanbul ignore if: –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≤ —Ç–µ—Å—Ç–∞—Ö */\n    if (getRef) {\n      warn(\n        '–°–≤–æ–π—Å—Ç–≤–æ `getRef` —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –∏ –±—É–¥–µ—Ç —É–¥–∞–ª–µ–Ω–æ –≤ VKUI v9. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `slotProps={ img: { getRootRef: ... } }`',\n      );\n    }\n  }\n\n  const size = sizeProp ?? minOr([sizeToNumber(widthSize), sizeToNumber(heightSize)], defaultSize);\n  const wrapperRef = useExternRef(getRootRef);\n\n  const width = widthSize ?? (keepAspectRatio ? undefined : size);\n  const height = heightSize ?? (keepAspectRatio ? undefined : size);\n\n  const [loaded, setLoaded] = React.useState(false);\n  const [failed, setFailed] = React.useState(false);\n\n  const mouseOverHandlersRef = useRef<VoidFunction[]>([]);\n  const mouseOutHandlersRef = useRef<VoidFunction[]>([]);\n\n  const hasSrc = src || srcSet;\n  const fallbackIcon = failed || !hasSrc ? fallbackIconProp : null;\n\n  if (process.env.NODE_ENV === 'development') {\n    validateSize(size);\n    if (React.isValidElement(fallbackIcon)) {\n      validateFallbackIcon(size, { name: 'fallbackIcon', value: fallbackIcon });\n    }\n  }\n\n  const handleImageLoad = (event: React.SyntheticEvent<HTMLImageElement>) => {\n    if (loaded) {\n      return;\n    }\n\n    setLoaded(true);\n    setFailed(false);\n    onLoad?.(event);\n  };\n\n  const handleImageError = (event: React.SyntheticEvent<HTMLImageElement>) => {\n    setLoaded(false);\n    setFailed(true);\n    onError?.(event);\n  };\n\n  const {\n    getRootRef: getImgRef,\n    fetchPriority,\n    ...imgRest\n  } = useMergeProps<React.ComponentProps<'img'> & HasRootRef<HTMLImageElement> & HasDataAttribute>(\n    hasSrc\n      ? {\n          // safari –∏ firefox –Ω—É–∂–Ω–æ —á—Ç–æ–±—ã –∞—Ç—Ä–∏–±—É—Ç `loading` –±—ã–ª –¥–æ `src`\n          //\n          // https://mihaly4.ru/image-loading-lazy-bug\n          loading,\n          getRootRef: getRef,\n          alt,\n          className: classNames(\n            styles.img,\n            getObjectFitClassName(objectFit),\n            objectPosition && styles.withObjectPosition,\n            filter && styles.withFilter,\n            keepAspectRatio && styles.imgKeepRatio,\n            failed && styles.imgHiddenAlt,\n          ),\n          crossOrigin,\n          decoding,\n          referrerPolicy,\n          style: mergeStyle(\n            keepAspectRatio\n              ? {\n                  width: widthImg || width,\n                  height: heightImg || height,\n                }\n              : undefined,\n            objectPosition || filter\n              ? {\n                  '--vkui_internal--ImageBase_object_position': objectPosition,\n                  '--vkui_internal--ImageBase_object_filter': filter,\n                }\n              : undefined,\n          ),\n          sizes,\n          src,\n          srcSet,\n          useMap,\n          width,\n          height,\n          onLoad: handleImageLoad,\n          onError: handleImageError,\n          fetchPriority: fetchPriorityProp,\n          // @ts-expect-error: TS2322 –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ @types/react\n          elementtiming: elementTiming, // eslint-disable-line react/no-unknown-property\n        }\n      : {},\n    hasSrc ? slotProps?.img : undefined,\n  );\n\n  const imgRef = useExternRef(getImgRef);\n  const isOnLoadStatusCheckedRef = React.useRef(false);\n  React.useEffect(\n    function dispatchLoadEventForAlreadyLoadedResourceIfReactInitializedLater() {\n      if (isOnLoadStatusCheckedRef.current) {\n        return;\n      }\n      isOnLoadStatusCheckedRef.current = true;\n\n      if (imgRef.current && imgRef.current.complete && !loaded) {\n        const event = new Event('load');\n        imgRef.current.dispatchEvent(event);\n      }\n    },\n    [imgRef, loaded],\n  );\n\n  const onMouseOver = () => {\n    mouseOverHandlersRef.current.forEach((fn) => fn());\n  };\n\n  const onMouseOut = () => {\n    mouseOutHandlersRef.current.forEach((fn) => fn());\n  };\n\n  const contextValue = React.useMemo(\n    () => ({\n      size,\n      onMouseOverHandlers: mouseOverHandlersRef.current,\n      onMouseOutHandlers: mouseOutHandlersRef.current,\n    }),\n    [size],\n  );\n\n  return (\n    <ImageBaseContext.Provider value={contextValue}>\n      <Clickable\n        baseStyle={{ width, height }}\n        baseClassName={classNames(\n          styles.host,\n          hasSrc && loaded && styles.loaded,\n          withTransparentBackground && styles.transparentBackground,\n        )}\n        getRootRef={wrapperRef}\n        onMouseOver={onMouseOver}\n        onMouseOut={onMouseOut}\n        {...restProps}\n      >\n        {hasSrc && <img ref={imgRef} {...imgRest} {...getFetchPriorityProp(fetchPriority)} />}\n        {fallbackIcon && <div className={styles.fallback}>{fallbackIcon}</div>}\n        {children && <div className={styles.children}>{children}</div>}\n        {!noBorder && <div aria-hidden className={styles.border} />}\n      </Clickable>\n    </ImageBaseContext.Provider>\n  );\n};\nImageBase.Badge = ImageBaseBadge;\nImageBase.Overlay = ImageBaseOverlay;\nImageBase.FloatElement = ImageBaseFloatElement;\n\nif (process.env.NODE_ENV !== 'production') {\n  defineComponentDisplayNames(ImageBase.Badge, 'ImageBase.Badge');\n  defineComponentDisplayNames(ImageBase.Overlay, 'ImageBase.Overlay');\n  defineComponentDisplayNames(ImageBase.FloatElement, 'ImageBase.FloatElement');\n}\n"],"names":["useRef","React","classNames","mergeStyle","useExternRef","useMergeProps","minOr","defineComponentDisplayNames","getFetchPriorityProp","warnOnce","Clickable","ImageBaseBadge","ImageBaseFloatElement","ImageBaseOverlay","ImageBaseContext","validateFallbackIcon","validateSize","styles","getBadgeIconSizeByImageBaseSize","getFallbackIconSizeByImageBaseSize","getOverlayIconSizeByImageBaseSize","warn","defaultSize","getObjectFitClassName","objectFit","imgObjectFitContain","imgObjectFitCover","imgObjectFitNone","imgObjectFitScaleDown","undefined","parsePx","value","endsWith","parseInt","sizeToNumber","size","ImageBase","alt","crossOrigin","decoding","loading","referrerPolicy","sizes","src","srcSet","useMap","fetchPriority","fetchPriorityProp","getRef","sizeProp","width","widthImg","height","heightImg","widthSize","heightSize","noBorder","fallbackIcon","fallbackIconProp","children","onLoad","onError","withTransparentBackground","objectPosition","filter","keepAspectRatio","getRootRef","elementTiming","slotProps","restProps","process","env","NODE_ENV","wrapperRef","loaded","setLoaded","useState","failed","setFailed","mouseOverHandlersRef","mouseOutHandlersRef","hasSrc","isValidElement","name","handleImageLoad","event","handleImageError","getImgRef","imgRest","className","img","withObjectPosition","withFilter","imgKeepRatio","imgHiddenAlt","style","elementtiming","imgRef","isOnLoadStatusCheckedRef","useEffect","dispatchLoadEventForAlreadyLoadedResourceIfReactInitializedLater","current","complete","Event","dispatchEvent","onMouseOver","forEach","fn","onMouseOut","contextValue","useMemo","onMouseOverHandlers","onMouseOutHandlers","Provider","baseStyle","baseClassName","host","transparentBackground","ref","div","fallback","aria-hidden","border","Badge","Overlay","FloatElement"],"mappings":"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"}