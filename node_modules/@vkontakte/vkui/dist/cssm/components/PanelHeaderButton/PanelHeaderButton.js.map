{"version":3,"sources":["../../../../src/components/PanelHeaderButton/PanelHeaderButton.tsx"],"sourcesContent":["'use client';\n\nimport * as React from 'react';\nimport { classNames, isPrimitiveReactNode } from '@vkontakte/vkjs';\nimport { usePlatform } from '../../hooks/usePlatform';\nimport { hasAccessibleName } from '../../lib/accessibility';\nimport { COMMON_WARNINGS, warnOnce } from '../../lib/warnOnce';\nimport { Tappable, type TappableOmitProps } from '../Tappable/Tappable';\nimport { Text } from '../Typography/Text/Text';\nimport { Title } from '../Typography/Title/Title';\nimport styles from './PanelHeaderButton.module.css';\n\nconst platformClassNames = {\n  ios: styles.ios,\n  android: styles.android,\n  vkcom: styles.vkcom,\n};\n\nconst defaultHoverMode = {\n  ios: 'background',\n  android: 'background',\n  vkcom: styles.hover,\n};\n\nconst defaultActiveMode = {\n  ios: 'opacity',\n  android: 'background',\n  vkcom: styles.active,\n};\n\nexport interface PanelHeaderButtonProps extends Omit<TappableOmitProps, 'label'> {\n  /**\n   * Флаг для обозначения первичной кнопки\n   * Влияет на стилизацию кнопки.\n   */\n  primary?: boolean;\n  /**\n   * Текст или содержимое кнопки.\n   */\n  label?: React.ReactNode; // TODO [>=8]: добавить св-во indicator, чтобы разграничить кейсы.\n}\n\ninterface ButtonTypographyProps extends React.AllHTMLAttributes<HTMLElement> {\n  /**\n   * Флаг для обозначения первичной кнопки\n   * Наследуется от PanelHeaderButtonProps['primary'].\n   */\n  primary?: PanelHeaderButtonProps['primary'];\n}\n\nconst ButtonTypography = ({ primary, children }: ButtonTypographyProps) => {\n  const platform = usePlatform();\n\n  if (platform === 'ios') {\n    return (\n      <Title Component=\"span\" level=\"3\" weight={primary ? '1' : '3'}>\n        {children}\n      </Title>\n    );\n  }\n\n  return <Text weight={platform === 'vkcom' ? undefined : '2'}>{children}</Text>;\n};\n\nconst warn = warnOnce('PanelHeaderButton');\n\n/**\n * @see https://vkui.io/components/panel-header#panel-header-button\n */\nexport const PanelHeaderButton = ({\n  children,\n  primary = false,\n  label,\n  activeEffectDelay = 200,\n  hoverMode,\n  activeMode,\n  ...restProps\n}: PanelHeaderButtonProps): React.ReactNode => {\n  const isPrimitive = isPrimitiveReactNode(children);\n  const isPrimitiveLabel = isPrimitiveReactNode(label);\n  const platform = usePlatform();\n\n  if (process.env.NODE_ENV === 'development') {\n    /* istanbul ignore next: проверка в dev mode, тест на hasAccessibleName() есть в lib/accessibility.test.tsx */\n    const isAccessible = hasAccessibleName({\n      children: [children, label],\n      ...restProps,\n    });\n\n    if (!isAccessible) {\n      warn(COMMON_WARNINGS.a11y[restProps.href ? 'link-name' : 'button-name'], 'error');\n    }\n  }\n  const elements = [label, children].filter((item) => !!item);\n\n  const onlyPrimitive = elements.length === 1 && isPrimitiveReactNode(elements[0]);\n\n  return (\n    <Tappable\n      Component={restProps.href ? 'a' : 'button'}\n      activeEffectDelay={activeEffectDelay}\n      hoverMode={hoverMode ? hoverMode : defaultHoverMode[platform]}\n      activeMode={activeMode ? activeMode : defaultActiveMode[platform]}\n      {...restProps}\n      baseClassName={classNames(\n        styles.host,\n        platformClassNames.hasOwnProperty(platform)\n          ? platformClassNames[platform]\n          : platformClassNames.android,\n        onlyPrimitive && styles.primitive,\n        !isPrimitive && !isPrimitiveLabel && styles.notPrimitive,\n      )}\n    >\n      {isPrimitive ? <ButtonTypography primary={primary}>{children}</ButtonTypography> : children}\n      {isPrimitiveLabel ? (\n        <ButtonTypography primary={primary} className={styles.label}>\n          {label}\n        </ButtonTypography>\n      ) : (\n        label\n      )}\n    </Tappable>\n  );\n};\n"],"names":["React","classNames","isPrimitiveReactNode","usePlatform","hasAccessibleName","COMMON_WARNINGS","warnOnce","Tappable","Text","Title","styles","platformClassNames","ios","android","vkcom","defaultHoverMode","hover","defaultActiveMode","active","ButtonTypography","primary","children","platform","Component","level","weight","undefined","warn","PanelHeaderButton","label","activeEffectDelay","hoverMode","activeMode","restProps","isPrimitive","isPrimitiveLabel","process","env","NODE_ENV","isAccessible","a11y","href","elements","filter","item","onlyPrimitive","length","baseClassName","host","hasOwnProperty","primitive","notPrimitive","className"],"mappings":"AAAA;;AAEA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,UAAU,EAAEC,oBAAoB,QAAQ,kBAAkB;AACnE,SAASC,WAAW,QAAQ,6BAA0B;AACtD,SAASC,iBAAiB,QAAQ,6BAA0B;AAC5D,SAASC,eAAe,EAAEC,QAAQ,QAAQ,wBAAqB;AAC/D,SAASC,QAAQ,QAAgC,0BAAuB;AACxE,SAASC,IAAI,QAAQ,6BAA0B;AAC/C,SAASC,KAAK,QAAQ,+BAA4B;AAClD,OAAOC,YAAY,iCAAiC;AAEpD,MAAMC,qBAAqB;IACzBC,KAAKF,OAAOE,GAAG;IACfC,SAASH,OAAOG,OAAO;IACvBC,OAAOJ,OAAOI,KAAK;AACrB;AAEA,MAAMC,mBAAmB;IACvBH,KAAK;IACLC,SAAS;IACTC,OAAOJ,OAAOM,KAAK;AACrB;AAEA,MAAMC,oBAAoB;IACxBL,KAAK;IACLC,SAAS;IACTC,OAAOJ,OAAOQ,MAAM;AACtB;AAsBA,MAAMC,mBAAmB,CAAC,EAAEC,OAAO,EAAEC,QAAQ,EAAyB;IACpE,MAAMC,WAAWnB;IAEjB,IAAImB,aAAa,OAAO;QACtB,qBACE,KAACb;YAAMc,WAAU;YAAOC,OAAM;YAAIC,QAAQL,UAAU,MAAM;sBACvDC;;IAGP;IAEA,qBAAO,KAACb;QAAKiB,QAAQH,aAAa,UAAUI,YAAY;kBAAML;;AAChE;AAEA,MAAMM,OAAOrB,SAAS;AAEtB;;CAEC,GACD,OAAO,MAAMsB,oBAAoB,CAAC,EAChCP,QAAQ,EACRD,UAAU,KAAK,EACfS,KAAK,EACLC,oBAAoB,GAAG,EACvBC,SAAS,EACTC,UAAU,EACV,GAAGC,WACoB;IACvB,MAAMC,cAAchC,qBAAqBmB;IACzC,MAAMc,mBAAmBjC,qBAAqB2B;IAC9C,MAAMP,WAAWnB;IAEjB,IAAIiC,QAAQC,GAAG,CAACC,QAAQ,KAAK,eAAe;QAC1C,4GAA4G,GAC5G,MAAMC,eAAenC,kBAAkB;YACrCiB,UAAU;gBAACA;gBAAUQ;aAAM;YAC3B,GAAGI,SAAS;QACd;QAEA,IAAI,CAACM,cAAc;YACjBZ,KAAKtB,gBAAgBmC,IAAI,CAACP,UAAUQ,IAAI,GAAG,cAAc,cAAc,EAAE;QAC3E;IACF;IACA,MAAMC,WAAW;QAACb;QAAOR;KAAS,CAACsB,MAAM,CAAC,CAACC,OAAS,CAAC,CAACA;IAEtD,MAAMC,gBAAgBH,SAASI,MAAM,KAAK,KAAK5C,qBAAqBwC,QAAQ,CAAC,EAAE;IAE/E,qBACE,MAACnC;QACCgB,WAAWU,UAAUQ,IAAI,GAAG,MAAM;QAClCX,mBAAmBA;QACnBC,WAAWA,YAAYA,YAAYhB,gBAAgB,CAACO,SAAS;QAC7DU,YAAYA,aAAaA,aAAaf,iBAAiB,CAACK,SAAS;QAChE,GAAGW,SAAS;QACbc,eAAe9C,WACbS,OAAOsC,IAAI,EACXrC,mBAAmBsC,cAAc,CAAC3B,YAC9BX,kBAAkB,CAACW,SAAS,GAC5BX,mBAAmBE,OAAO,EAC9BgC,iBAAiBnC,OAAOwC,SAAS,EACjC,CAAChB,eAAe,CAACC,oBAAoBzB,OAAOyC,YAAY;;YAGzDjB,4BAAc,KAACf;gBAAiBC,SAASA;0BAAUC;iBAA+BA;YAClFc,iCACC,KAAChB;gBAAiBC,SAASA;gBAASgC,WAAW1C,OAAOmB,KAAK;0BACxDA;iBAGHA;;;AAIR,EAAE"}