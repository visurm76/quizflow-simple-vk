'use client';
import { _ as _object_spread } from "@swc/helpers/_/_object_spread";
import { _ as _object_spread_props } from "@swc/helpers/_/_object_spread_props";
import { _ as _object_without_properties } from "@swc/helpers/_/_object_without_properties";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import * as React from "react";
import { classNames, hasReactNode } from "@vkontakte/vkjs";
import { useExternRef } from "../../hooks/useExternRef.js";
import { useMergeProps } from "../../hooks/useMergeProps.js";
import { usePlatform } from "../../hooks/usePlatform.js";
import { callMultiple } from "../../lib/callMultiple.js";
import { warnOnce } from "../../lib/warnOnce.js";
import { RootComponent } from "../RootComponent/RootComponent.js";
import { useResizeTextarea } from "../Textarea/useResizeTextarea.js";
import { Headline } from "../Typography/Headline/Headline.js";
import { Title } from "../Typography/Title/Title.js";
const warn = warnOnce('WriteBar');
const WriteBarTypography = (props)=>{
    const platform = usePlatform();
    if (platform === 'ios') {
        return /*#__PURE__*/ _jsx(Title, _object_spread_props(_object_spread({}, props), {
            level: "3",
            weight: "3"
        }));
    }
    return /*#__PURE__*/ _jsx(Headline, _object_spread({
        weight: "3"
    }, props));
};
/**
 * @see https://vkui.io/components/write-bar
 */ export const WriteBar = (_param)=>{
    var { className, style, before, inlineAfter, after, getRootRef, getRef, onHeightChange, shadow = false, slotProps } = _param, restProps = _object_without_properties(_param, [
        "className",
        "style",
        "before",
        "inlineAfter",
        "after",
        "getRootRef",
        "getRef",
        "onHeightChange",
        "shadow",
        "slotProps"
    ]);
    /* istanbul ignore if: не проверяем в тестах */ if (process.env.NODE_ENV === 'development' && getRef) {
        warn('Свойство `getRef` устаревшее, используйте `slotProps={ textArea: { getRootRef: ... } }`');
    }
    const platform = usePlatform();
    const rootProps = useMergeProps({
        className,
        getRootRef,
        style
    }, slotProps === null || slotProps === void 0 ? void 0 : slotProps.root);
    const _useMergeProps = useMergeProps(_object_spread({
        className: "vkuiWriteBar__textarea",
        getRootRef: getRef
    }, restProps), slotProps === null || slotProps === void 0 ? void 0 : slotProps.textArea), { onChange, getRootRef: getTextAreaRef } = _useMergeProps, textAreaRest = _object_without_properties(_useMergeProps, [
        "onChange",
        "getRootRef"
    ]);
    const [refResizeTextarea, resize] = useResizeTextarea(onHeightChange, true);
    const textareaRef = useExternRef(getTextAreaRef, refResizeTextarea);
    React.useEffect(resize, [
        resize,
        platform
    ]);
    return /*#__PURE__*/ _jsx(RootComponent, _object_spread_props(_object_spread({
        baseClassName: classNames("vkuiWriteBar__host", platform === 'ios' && "vkuiWriteBar__ios", shadow && "vkuiWriteBar__shadow")
    }, rootProps), {
        children: /*#__PURE__*/ _jsxs("div", {
            className: "vkuiWriteBar__form",
            children: [
                hasReactNode(before) && /*#__PURE__*/ _jsx("div", {
                    className: "vkuiWriteBar__before",
                    children: before
                }),
                /*#__PURE__*/ _jsxs("div", {
                    className: "vkuiWriteBar__formIn",
                    children: [
                        /*#__PURE__*/ _jsx(WriteBarTypography, _object_spread({
                            Component: "textarea",
                            onChange: callMultiple(onChange, resize),
                            getRootRef: textareaRef
                        }, textAreaRest)),
                        hasReactNode(inlineAfter) && /*#__PURE__*/ _jsx("div", {
                            className: "vkuiWriteBar__inlineAfter",
                            children: inlineAfter
                        })
                    ]
                }),
                hasReactNode(after) && /*#__PURE__*/ _jsx("div", {
                    className: "vkuiWriteBar__after",
                    children: after
                })
            ]
        })
    }));
};

//# sourceMappingURL=WriteBar.js.map