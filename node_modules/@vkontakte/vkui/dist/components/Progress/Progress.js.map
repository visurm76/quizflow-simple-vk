{"version":3,"sources":["../../../src/components/Progress/Progress.tsx"],"sourcesContent":["import * as React from 'react';\nimport { classNames } from '@vkontakte/vkjs';\nimport { clamp } from '../../helpers/math';\nimport { type CSSCustomProperties, type HTMLAttributesWithRootRef } from '../../types';\nimport { RootComponent } from '../RootComponent/RootComponent';\nimport styles from './Progress.module.css';\n\nconst stylesAppearance: Record<string, string> = {\n  accent: styles.appearanceAccent,\n  positive: styles.appearancePositive,\n  negative: styles.appearanceNegative,\n};\n\nfunction progressCustomHeightStyle(height: number | undefined): React.CSSProperties | undefined {\n  return height\n    ? {\n        height,\n        borderRadius: height / 2,\n      }\n    : undefined;\n}\n\nexport interface ProgressProps extends HTMLAttributesWithRootRef<HTMLDivElement> {\n  /**\n   * Стиль отображения прогрессбара.\n   */\n  appearance?: 'accent' | 'positive' | 'negative' | `var(--${string})` | `#${string}`;\n  /**\n   * Значение прогресса.\n   */\n  value?: number;\n  /**\n   * Высота элемента.\n   */\n  height?: number;\n  /**\n   * Сделать прогрессбар прозрачным.\n   */\n  trackDisable?: boolean;\n}\n\nconst PROGRESS_MIN_VALUE = 0;\nconst PROGRESS_MAX_VALUE = 100;\n\nconst resolveAppearance = (\n  appearance: Exclude<ProgressProps['appearance'], undefined>,\n): [CSSCustomProperties | undefined, string | undefined] => {\n  switch (appearance) {\n    case 'accent':\n    case 'positive':\n    case 'negative':\n      return [undefined, stylesAppearance[appearance]];\n    default: {\n      return [{ '--vkui_internal_Progress_background_color': appearance }, undefined];\n    }\n  }\n};\n\n/**\n * @see https://vkui.io/components/progress\n */\nexport const Progress = ({\n  value = 0,\n  height,\n  trackDisable = false,\n  appearance = 'accent',\n  ...restProps\n}: ProgressProps): React.ReactNode => {\n  const progress = clamp(value, PROGRESS_MIN_VALUE, PROGRESS_MAX_VALUE);\n  const title = `${progress} / ${PROGRESS_MAX_VALUE}`;\n  const styleHeight = progressCustomHeightStyle(height);\n\n  const [appearanceStyles, appearanceClassName] = resolveAppearance(appearance);\n\n  const style = {\n    ...styleHeight,\n    ...appearanceStyles,\n    '--vkui_internal_Progress_progress': progress,\n  };\n\n  return (\n    <RootComponent\n      aria-valuenow={value}\n      title={title}\n      {...restProps}\n      role=\"progressbar\"\n      aria-valuemin={PROGRESS_MIN_VALUE}\n      aria-valuemax={PROGRESS_MAX_VALUE}\n      baseClassName={classNames(\n        styles.host,\n        trackDisable && styles.trackDisable,\n        appearanceClassName,\n      )}\n      baseStyle={style}\n    />\n  );\n};\n"],"names":["React","classNames","clamp","RootComponent","stylesAppearance","accent","positive","negative","progressCustomHeightStyle","height","borderRadius","undefined","PROGRESS_MIN_VALUE","PROGRESS_MAX_VALUE","resolveAppearance","appearance","Progress","value","trackDisable","restProps","progress","title","styleHeight","appearanceStyles","appearanceClassName","style","aria-valuenow","role","aria-valuemin","aria-valuemax","baseClassName","baseStyle"],"mappings":";;;;AAAA,YAAYA,WAAW,QAAQ;AAC/B,SAASC,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,KAAK,QAAQ,wBAAqB;AAE3C,SAASC,aAAa,QAAQ,oCAAiC;AAG/D,MAAMC,mBAA2C;IAC/CC,MAAM;IACNC,QAAQ;IACRC,QAAQ;AACV;AAEA,SAASC,0BAA0BC,MAA0B;IAC3D,OAAOA,SACH;QACEA;QACAC,cAAcD,SAAS;IACzB,IACAE;AACN;AAqBA,MAAMC,qBAAqB;AAC3B,MAAMC,qBAAqB;AAE3B,MAAMC,oBAAoB,CACxBC;IAEA,OAAQA;QACN,KAAK;QACL,KAAK;QACL,KAAK;YACH,OAAO;gBAACJ;gBAAWP,gBAAgB,CAACW,WAAW;aAAC;QAClD;YAAS;gBACP,OAAO;oBAAC;wBAAE,6CAA6CA;oBAAW;oBAAGJ;iBAAU;YACjF;IACF;AACF;AAEA;;CAEC,GACD,OAAO,MAAMK,WAAW;QAAC,EACvBC,QAAQ,CAAC,EACTR,MAAM,EACNS,eAAe,KAAK,EACpBH,aAAa,QAAQ,EAEP,WADXI;QAJHF;QACAR;QACAS;QACAH;;IAGA,MAAMK,WAAWlB,MAAMe,OAAOL,oBAAoBC;IAClD,MAAMQ,QAAQ,GAAGD,SAAS,GAAG,EAAEP,oBAAoB;IACnD,MAAMS,cAAcd,0BAA0BC;IAE9C,MAAM,CAACc,kBAAkBC,oBAAoB,GAAGV,kBAAkBC;IAElE,MAAMU,QAAQ,wCACTH,aACAC;QACH,qCAAqCH;;IAGvC,qBACE,KAACjB;QACCuB,iBAAeT;QACfI,OAAOA;OACHF;QACJQ,MAAK;QACLC,iBAAehB;QACfiB,iBAAehB;QACfiB,eAAe7B,iCAEbiB,8CACAM;QAEFO,WAAWN;;AAGjB,EAAE"}