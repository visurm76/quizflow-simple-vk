{"version":3,"sources":["../../../src/lib/animation/useReducedMotion.ts"],"sourcesContent":["/* eslint-disable no-restricted-properties */\nimport * as React from 'react';\nimport { useDOM } from '../dom';\nimport { matchMediaListAddListener, matchMediaListRemoveListener } from '../matchMedia';\nimport { useIsomorphicLayoutEffect } from '../useIsomorphicLayoutEffect';\n\nexport const REDUCE_MOTION_MEDIA_QUERY = 'screen and (prefers-reduced-motion: reduce)';\n\n/**\n * Хук для отслеживания предпочтения пользователя в уменьшении анимации.\n *\n * @returns {boolean | undefined} Возвращает `true`, если пользователь предпочитает уменьшенную анимацию,\n * `false` - если нет, и `undefined` во время серверного рендеринга или во время первого рендеринга на клиенте.\n */\nexport const useReducedMotion = (): boolean | undefined => {\n  const { window } = useDOM();\n\n  const [reducedMotion, setReducedMotion] = React.useState<boolean | undefined>(undefined);\n\n  useIsomorphicLayoutEffect(() => {\n    /* istanbul ignore if: невозможный кейс (в SSR вызова этой функции не будет) */\n    if (!window) {\n      return;\n    }\n    const match = window.matchMedia(REDUCE_MOTION_MEDIA_QUERY);\n    setReducedMotion(match.matches);\n    /* istanbul ignore next: на текущий момент, покрытие данного кейса неинтересно  */\n    const handleMediaQueryChange = (event: MediaQueryListEvent) => {\n      /* istanbul ignore next */\n      setReducedMotion(event.matches);\n    };\n    matchMediaListAddListener(match, handleMediaQueryChange);\n    return () => matchMediaListRemoveListener(match, handleMediaQueryChange);\n  }, [window]);\n\n  return reducedMotion;\n};\n"],"names":["React","useDOM","matchMediaListAddListener","matchMediaListRemoveListener","useIsomorphicLayoutEffect","REDUCE_MOTION_MEDIA_QUERY","useReducedMotion","window","reducedMotion","setReducedMotion","useState","undefined","match","matchMedia","matches","handleMediaQueryChange","event"],"mappings":"AAAA,2CAA2C,GAC3C,YAAYA,WAAW,QAAQ;AAC/B,SAASC,MAAM,QAAQ,YAAS;AAChC,SAASC,yBAAyB,EAAEC,4BAA4B,QAAQ,mBAAgB;AACxF,SAASC,yBAAyB,QAAQ,kCAA+B;AAEzE,OAAO,MAAMC,4BAA4B,8CAA8C;AAEvF;;;;;CAKC,GACD,OAAO,MAAMC,mBAAmB;IAC9B,MAAM,EAAEC,MAAM,EAAE,GAAGN;IAEnB,MAAM,CAACO,eAAeC,iBAAiB,GAAGT,MAAMU,QAAQ,CAAsBC;IAE9EP,0BAA0B;QACxB,6EAA6E,GAC7E,IAAI,CAACG,QAAQ;YACX;QACF;QACA,MAAMK,QAAQL,OAAOM,UAAU,CAACR;QAChCI,iBAAiBG,MAAME,OAAO;QAC9B,gFAAgF,GAChF,MAAMC,yBAAyB,CAACC;YAC9B,wBAAwB,GACxBP,iBAAiBO,MAAMF,OAAO;QAChC;QACAZ,0BAA0BU,OAAOG;QACjC,OAAO,IAAMZ,6BAA6BS,OAAOG;IACnD,GAAG;QAACR;KAAO;IAEX,OAAOC;AACT,EAAE"}