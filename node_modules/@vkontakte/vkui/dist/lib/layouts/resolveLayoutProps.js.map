{"version":3,"sources":["../../../src/lib/layouts/resolveLayoutProps.ts"],"sourcesContent":["import { classNames } from '@vkontakte/vkjs';\nimport { mergeStyle } from '../../helpers/mergeStyle';\nimport { generateConstantClassName, generateVariable, generateVariableClassName } from './helpers';\nimport { LAYOUT_PROPS, type LayoutPropKeys } from './layoutProps';\n\nexport type ComponentProps = {\n  className?: string;\n  style?: React.CSSProperties;\n  [key: string]: unknown;\n};\n\n/**\n * Превращает layout свойства в нужные значения className/style\n * @param props - все пропы компонента\n * @returns измененные свойства\n */\nexport function resolveLayoutProps<T extends ComponentProps>(\n  props: T & { className?: string; style?: React.CSSProperties },\n) {\n  const outProps = { ...props };\n  let resolvedClassName: string | undefined;\n  let resolvedStyle: React.CSSProperties | undefined;\n\n  for (const key in LAYOUT_PROPS) {\n    if (key in outProps && outProps[key] !== undefined) {\n      const propDef = LAYOUT_PROPS[key as LayoutPropKeys];\n      const value = outProps[key];\n      const cssProperty = key.replace(/([A-Z])/g, '-$1').toLowerCase();\n      if (typeof value === 'string' && (propDef as string[]).includes(value)) {\n        resolvedClassName = classNames(\n          resolvedClassName,\n          generateConstantClassName(cssProperty, value),\n        );\n      } else if (key !== 'position' && !key.startsWith('overflow')) {\n        resolvedClassName = classNames(resolvedClassName, generateVariableClassName(cssProperty));\n        resolvedStyle = mergeStyle(resolvedStyle, {\n          [generateVariable(cssProperty)]:\n            typeof value === 'number' && key !== 'flexGrow' && key !== 'flexShrink'\n              ? `${value}px`\n              : value,\n        });\n      }\n      delete outProps[key];\n    }\n  }\n\n  outProps.className = classNames(resolvedClassName, outProps.className);\n  outProps.style = mergeStyle(resolvedStyle, outProps.style);\n\n  return outProps;\n}\n"],"names":["classNames","mergeStyle","generateConstantClassName","generateVariable","generateVariableClassName","LAYOUT_PROPS","resolveLayoutProps","props","outProps","resolvedClassName","resolvedStyle","key","undefined","propDef","value","cssProperty","replace","toLowerCase","includes","startsWith","className","style"],"mappings":";AAAA,SAASA,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,UAAU,QAAQ,8BAA2B;AACtD,SAASC,yBAAyB,EAAEC,gBAAgB,EAAEC,yBAAyB,QAAQ,eAAY;AACnG,SAASC,YAAY,QAA6B,mBAAgB;AAQlE;;;;CAIC,GACD,OAAO,SAASC,mBACdC,KAA8D;IAE9D,MAAMC,WAAW,mBAAKD;IACtB,IAAIE;IACJ,IAAIC;IAEJ,IAAK,MAAMC,OAAON,aAAc;QAC9B,IAAIM,OAAOH,YAAYA,QAAQ,CAACG,IAAI,KAAKC,WAAW;YAClD,MAAMC,UAAUR,YAAY,CAACM,IAAsB;YACnD,MAAMG,QAAQN,QAAQ,CAACG,IAAI;YAC3B,MAAMI,cAAcJ,IAAIK,OAAO,CAAC,YAAY,OAAOC,WAAW;YAC9D,IAAI,OAAOH,UAAU,YAAY,AAACD,QAAqBK,QAAQ,CAACJ,QAAQ;gBACtEL,oBAAoBT,WAClBS,mBACAP,0BAA0Ba,aAAaD;YAE3C,OAAO,IAAIH,QAAQ,cAAc,CAACA,IAAIQ,UAAU,CAAC,aAAa;gBAC5DV,oBAAoBT,WAAWS,mBAAmBL,0BAA0BW;gBAC5EL,gBAAgBT,WAAWS,eAAe;oBACxC,CAACP,iBAAiBY,aAAa,EAC7B,OAAOD,UAAU,YAAYH,QAAQ,cAAcA,QAAQ,eACvD,GAAGG,MAAM,EAAE,CAAC,GACZA;gBACR;YACF;YACA,OAAON,QAAQ,CAACG,IAAI;QACtB;IACF;IAEAH,SAASY,SAAS,GAAGpB,WAAWS,mBAAmBD,SAASY,SAAS;IACrEZ,SAASa,KAAK,GAAGpB,WAAWS,eAAeF,SAASa,KAAK;IAEzD,OAAOb;AACT"}